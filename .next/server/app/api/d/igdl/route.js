"use strict";(()=>{var e={};e.id=831,e.ids=[831],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},74026:e=>{e.exports=require("string_decoder")},74175:e=>{e.exports=require("tty")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},77250:e=>{e.exports=import("puppeteer-core")},98061:e=>{e.exports=require("node:assert")},92761:e=>{e.exports=require("node:async_hooks")},72254:e=>{e.exports=require("node:buffer")},40027:e=>{e.exports=require("node:console")},6005:e=>{e.exports=require("node:crypto")},65714:e=>{e.exports=require("node:diagnostics_channel")},30604:e=>{e.exports=require("node:dns")},15673:e=>{e.exports=require("node:events")},87561:e=>{e.exports=require("node:fs")},93977:e=>{e.exports=require("node:fs/promises")},88849:e=>{e.exports=require("node:http")},42725:e=>{e.exports=require("node:http2")},22286:e=>{e.exports=require("node:https")},87503:e=>{e.exports=require("node:net")},70612:e=>{e.exports=require("node:os")},49411:e=>{e.exports=require("node:path")},38846:e=>{e.exports=require("node:perf_hooks")},39630:e=>{e.exports=require("node:querystring")},55467:e=>{e.exports=require("node:sqlite")},84492:e=>{e.exports=require("node:stream")},92332:e=>{e.exports=require("node:timers")},31764:e=>{e.exports=require("node:tls")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},93746:e=>{e.exports=require("node:util/types")},24086:e=>{e.exports=require("node:worker_threads")},65628:e=>{e.exports=require("node:zlib")},8641:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>u,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>c});var o=r(49303),i=r(88716),s=r(60670),n=r(36694),p=e([n]);n=(p.then?(await p)():p)[0];let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/d/igdl/route",pathname:"/api/d/igdl",filename:"route",bundlePath:"app/api/d/igdl/route"},resolvedPagePath:"/workspaces/Vile-Downloader/app/api/d/igdl/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:h}=l,m="/api/d/igdl/route";function u(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:c})}a()}catch(e){a(e)}})},36694:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{POST:()=>s});var o=r(7774),i=e([o]);async function s(e){try{let t=await e.json(),r=await (0,o.d1)(t.url);if(!r||0===r.length)return Response.json({status:!1,error:"No media found"},{status:404});return Response.json({status:!0,data:r})}catch(e){return Response.json({status:!1,error:e.message},{status:500})}}o=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})},7774:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{NA:()=>s.Z,PO:()=>o.Z,d1:()=>i.Z});var o=r(53133),i=r(12792),s=r(40184),n=e([i]);i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},12792:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>d});var o=r(86837),i=r.n(o),s=r(77250),n=e([s]);function p(e){return e?(Array.isArray(e)?e:[e]).map(e=>({thumbnail:e.thumb||"",url:e.url&&Array.isArray(e.url)&&e.url[0]?.url||""})).filter(e=>e.url):[]}async function u(e){await i().executablePath();let t=await s.default.launch({args:i().args,executablePath:await i().executablePath(),headless:!!i().headless}),r=await t.newPage();return new Promise(async(a,o)=>{let i=!1;r.on("response",async e=>{if(!i&&e.url().includes("/api/convert"))try{let r=await e.json();a(p(r)),i=!0,await t.close()}catch(e){await t.close(),o(e)}}),await r.setRequestInterception(!0),r.on("request",e=>["image","stylesheet","font"].includes(e.resourceType())?e.abort():e.continue());try{await r.goto("https://fastdl.app/id",{waitUntil:"domcontentloaded"}),await r.type("#search-form-input",e),await r.click(".search-form__button"),setTimeout(async()=>{i||(await t.close(),o(Error("timeout")))},3e4)}catch(e){await t.close(),o(e)}})}async function l(e){await i().executablePath();let t=await s.default.launch({args:i().args,executablePath:await i().executablePath(),headless:!!i().headless}),r=await t.newPage();return new Promise(async(a,o)=>{let i=!1;r.on("response",async e=>{if(!i&&e.url().includes("/api/convert"))try{let r=await e.json();a(p(r)),i=!0,await t.close()}catch(e){await t.close(),o(e)}}),await r.setRequestInterception(!0),r.on("request",e=>["image","stylesheet","font"].includes(e.resourceType())?e.abort():e.continue());try{await r.goto("https://igram.world/id/",{waitUntil:"networkidle2"}),await r.waitForSelector("#search-form-input",{visible:!0}),await r.type("#search-form-input",e),await r.waitForSelector(".search-form__button",{visible:!0}),await r.click(".search-form__button"),setTimeout(async()=>{i||(await t.close(),o(Error("timeout")))},3e4)}catch(e){await t.close(),o(e)}})}async function d(e){try{return await u(e)}catch{return await l(e)}}s=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},40184:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(24263),o=r(70917);async function i(e,t){let r=await a.Z.get("https://spotimate.io/"),i=o.zD(r.data),s=i("input[type='hidden']").filter((e,t)=>!!i(t).attr("name")?.startsWith("_")),n=s.attr("name"),p=s.val(),u=r.headers["set-cookie"]||[],l=u.find(e=>e.startsWith("session_data="))?.split(";")[0].split("=")[1]||"",d="----WebKitFormBoundary"+Math.random().toString(36).slice(2),c=[`--${d}`,'Content-Disposition: form-data; name="url"',"",e,`--${d}`,`Content-Disposition: form-data; name="${n}"`,"",p,`--${d}`,'Content-Disposition: form-data; name="cf-turnstile-response"',"",t,`--${d}--`,""].join("\r\n"),h=await a.Z.post("https://spotimate.io/action",c,{headers:{"content-type":`multipart/form-data; boundary=${d}`,cookie:`session_data=${l}`,referer:"https://spotimate.io/"}}),m=o.zD(h.data.html||h.data),w=m("h3 div").text().trim(),x=m("p span").text().trim(),g=m("img").first().attr("src"),f=m("a").filter((e,t)=>/\/dl\?token=/.test(m(t).attr("href")||"")&&/Download Mp3/i.test(m(t).text())).first().attr("href"),y=m("a").filter((e,t)=>/\/dl\?token=/.test(m(t).attr("href")||"")&&/Download Cover/i.test(m(t).text())).first().attr("href"),q={};try{let t=await a.Z.get(e),r=o.zD(t.data);q={title:r('meta[property="og:title"]').attr("content")||"",description:r('meta[property="og:description"]').attr("content")||"",image:r('meta[property="og:image"]').attr("content")||"",url:r('meta[property="og:url"]').attr("content")||e}}catch{}return{url:q.url||e,title:q.title||w,description:q.description||"",songTitle:w,artist:x,coverImage:q.image||g,mp3DownloadLink:f?`https://spotimate.io${f}`:null,coverDownloadLink:y?`https://spotimate.io${y}`:null}}},53133:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(24263),o=r(70917),i=r(86429),s=r(58600);class n{decodeJWT(e){try{let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(t).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}catch{return null}}async getInitialCookies(){let e=new i.CookieJar,t=(0,s.Y)(a.Z.create({jar:e,withCredentials:!0})),r={"User-Agent":this.genericUserAgent,Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5","Cache-Control":"max-age=0",Connection:"keep-alive","Upgrade-Insecure-Requests":"1"};return await t.get("https://www.tiktok.com/",{headers:r}),{jar:e,client:t,headers:r}}async getDownloadLinks(e){let t=await a.Z.get("https://musicaldown.com/en",{headers:{"user-agent":"Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Mobile Safari/537.36"}}),r=o.zD(t.data),i=r("#link_url").attr("name"),s=r("#submit-form input[type=hidden]").eq(0).attr("name"),n=r("#submit-form input[type=hidden]").eq(0).val(),p=r("#submit-form input[type=hidden]").eq(1).val(),u=new URLSearchParams({[i]:e,[s]:String(n),verify:String(p)}),l=await a.Z.post("https://musicaldown.com/download",u,{headers:{"content-type":"application/x-www-form-urlencoded",cookie:t.headers["set-cookie"]?.join("; "),referer:"https://musicaldown.com/en","user-agent":"Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Mobile Safari/537.36"}}),d=o.zD(l.data),c={video:[],audio:null,photo:[]},h=(e,t)=>{let r=d(e).attr("href");if(!r||!r.includes("token="))return;let a=this.decodeJWT(r.split("token=")[1]);a&&("video"===t&&c.video.push(a.url),"audio"===t&&(c.audio=a.url))};return h('a[data-event="hd_download_click"]',"video"),h('a[data-event="mp4_download_click"]',"video"),h('a[data-event="mp3_download_click"]',"audio"),d(".card-action.center a").each((e,t)=>{let r=d(t).attr("href");if(!r?.includes("token="))return;let a=this.decodeJWT(r.split("token=")[1]);a?.cover&&c.photo.push(a.cover)}),c}async scrape(e){let{client:t,headers:r}=await this.getInitialCookies(),a=(await t.get(e,{headers:r,maxRedirects:0,validateStatus:()=>!0})).headers.location||e;a.includes("/photo/")&&(a=a.replace("/photo/","/video/"));let{data:o}=await t.get(a,{headers:r,maxRedirects:10});if(!o.includes("__UNIVERSAL_DATA_FOR_REHYDRATION__"))throw Error("data_not_found");let i=JSON.parse(o.split('<script id="__UNIVERSAL_DATA_FOR_REHYDRATION__" type="application/json">')[1].split("</script>")[0]).__DEFAULT_SCOPE__["webapp.video-detail"];if(!i)throw Error("detail_not_found");if(i.statusMsg)throw Error("post.unavailable");let s=i.itemInfo.itemStruct,n=await this.getDownloadLinks(e);return{metadata:{stats:{likeCount:s.stats.diggCount,playCount:s.stats.playCount,commentCount:s.stats.commentCount,shareCount:s.stats.shareCount},title:s.imagePost?.title||"",description:s.desc,hashtags:s.textExtra.filter(e=>1===e.type).map(e=>e.hashtagName),locationCreated:s.locationCreated,suggestedWords:s.suggestedWords},download:n,postId:s.id}}constructor(){this.genericUserAgent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}}async function p(e){let t=new n;return await t.scrape(e)}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,344],()=>r(8641));module.exports=a})();